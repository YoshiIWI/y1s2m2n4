<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>mission5-1</title>
</head>
<body>
    <span style="font-size: 50px;"><div id="calculator_id"></div></span>
    <br>
    <button onclick="number_func(1)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">1</span></button>
    <button onclick="number_func(2)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">2</span></button>
    <button onclick="number_func(3)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">3</span></button>
    <br>
    <button onclick="number_func(4)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">4</span></button>
    <button onclick="number_func(5)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">5</span></button>
    <button onclick="number_func(6)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">6</span></button>
    <br>
    <button onclick="number_func(7)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">7</span></button>
    <button onclick="number_func(8)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">8</span></button>
    <button onclick="number_func(9)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">9</span></button>
    <br>
    <button onclick="number_func(0)" style="width: 50px;height: 50px;"><span style="font-size: 30px;">0</span></button>
    <br>
    <br>
    <br>
    <button onclick="shisoku_func('+')" style="width: 50px;height: 50px;"><span style="font-size: 30px;">+</span></button>
    <button onclick="shisoku_func('-')" style="width: 50px;height: 50px;"><span style="font-size: 30px;">-</span></button>
    <button onclick="shisoku_func('×')" style="width: 50px;height: 50px;"><span style="font-size: 30px;">×</span></button>
    <button onclick="shisoku_func('÷')" style="width: 50px;height: 50px;"><span style="font-size: 30px;">÷</span></button>
    <br>
    <br>
    <button onclick="equal_func()" style="width: 215px;height: 50px;"><span style="font-size: 30px;">=</span></button>
    <br>
    <button onclick="c_func()" style="width: 215px;height: 50px;"><span style="font-size: 30px;">C</span></button>
    <script src = "mission5-1.js"></script>
    <script>
        var output_text = document.getElementById("calculator_id");
        var temp_text = "";
        var elements = [];
        var element_number = 0;
        var math_symbol = [];
        var equal = true;

        function number_func(number){
            if(equal){
                c_func();
            }
            output_text.innerText += number;
            temp_text += number;
            console.log(output_text.textContent);
        }

        function shisoku_func(symbol){
            if(equal){
                output_text.innerText = "Ans"
                equal = false;
            }

            if(temp_text != ""){
                output_text.innerText += symbol;
                elements[element_number] = parseInt(temp_text);
                math_symbol[element_number] = symbol;
                temp_text = "";
                element_number += 1;
                console.log(output_text.textContent);

                console.log(elements);
                console.log(math_symbol);
            }

        }

        function equal_func(){
            if(equal || 
               temp_text == "" || 
               math_symbol.length == 0){

            }
            else {
                equal = true;

                if (temp_text != ""){
                    elements[element_number] = parseInt(temp_text);
                }
                else{
                    math_symbol.pop()
                }

                var solution = elements[0];

                for (var i = 0; i < elements.length; i++){
                    if(math_symbol[i] == "+"){
                        solution = solution + elements[i+1];
                    }
                    else if (math_symbol[i] == "-"){
                        solution = solution - elements[i+1];
                    }
                    else if (math_symbol[i] == "×"){
                        solution = solution * elements[i+1];
                    }
                    else if (math_symbol[i] == "÷"){
                        solution = solution / elements[i+1];
                    }
                }


                if (solution != "Infinity"){
                    output_text.innerText += "=\n";
                    output_text.innerText += solution;
                }
                else{
                    output_text.innerText += "\n※間違った計算です"
                }
                console.log(elements);
                console.log(math_symbol);
                console.log(solution);
            }
         }

        function c_func(){
            equal = false;
            temp_text = "";
            elements = [];
            element_number = 0;
            math_symbol = [];
            output_text.innerText = "";
        }

    </script>
</body>
</html>
